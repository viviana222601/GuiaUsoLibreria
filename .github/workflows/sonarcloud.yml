
name: SonarCloud Analysis

on:
  push:
    branches:
      - master
  pull_request:
    branches:
      - master
  workflow_dispatch:

jobs:
  sonarcloud:
    name: SonarCloud Scan
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ“¥ Checkout repository
        uses: actions/checkout@v3

      - name: ðŸš€ Run SonarCloud Analysis
        run: |
          echo "ðŸ”§ Usando JAVA_HOME: $JAVA_HOME"
          export JAVA_HOME=$(dirname $(dirname $(readlink -f $(which java))))
          sonar-scanner \
            -Dsonar.projectKey=viviana222601_GuiaUsoLibreria \
            -Dsonar.organization=viviana222601 \
            -Dsonar.host.url=https://sonarcloud.io \
            -Dsonar.token=${ secrets.SONAR_TOKEN }
